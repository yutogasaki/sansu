# 03 英語仕様書

英語英単語コンテンツの定義仕様書

---

## 目次

- [1. 基本方針](#1-基本方針)
- [2. スキル・レベル定義](#2-スキル・レベル定義)
- [3. 問題生成ルール（4択）](#3-問題生成ルール4択)
- [4. 日本語訳ルール](#4-日本語訳ルール)
- [5. 入力UI仕様](#5-入力ui仕様)
- [6. データ構造](#6-データ構造)

---

## 0. この仕様書の位置づけ

### 0.1 役割

このドキュメントは、英単語の**コンテンツ仕様（メタ情報・生成ルール）**を定義する。
具体的な単語リストは [05_english_words.md](./05_english_words.md) を参照。

| 定義する内容 | 定義しない内容（親を参照） |
|---|---|
| レベルごとのテーマ | 解放条件（正答率85%） |
| 選択肢生成ロジック | 記憶強度アルゴリズム |
| 日本語訳の方針 | UI共通仕様 |
| データ構造（英語固有） | ユーザーデータ全体 |

### 0.2 親仕様書との関係

| 項目 | 定義場所 |
|---|---|
| 解放条件（正答率85%） | 01_app_spec.md |
| 記憶強度アルゴリズム | 01_app_spec.md |
| データ構造（共通部分） | 01_app_spec.md |
| 単語リスト・レベル分け | **05_english_words.md** |
| 選択肢生成ルール | **本仕様書** |
| 日本語訳ルール | **本仕様書** |

---

## 1. 基本方針

### 1.1 コンセプト

**「反射的に意味がわかる」状態を目指す**

- 英語→日本語 の4択形式に特化
- スペル入力や和文英訳は扱わない（まずは受信スキル）
- 中学レベル（1200語）を完璧にすることをゴールとする

### 1.2 対象範囲

| 項目 | 内容 |
|---|---|
| 対象学年 | 中学1〜3年レベル（英検5級〜3級相当） |
| 単語数 | 1200語（20レベル×60語） |
| 出題形式 | 4択ボタン（英語→日本語） |

---

## 2. スキル・レベル定義

### 2.1 レベル構成（全20レベル）

1レベル60語。レベル1〜20まで段階的に難易度が上がる。

| レベル | 難易度 | テーマ例 | 語数 |
|---|---|---|---|
| Lv.1〜5 | 超基本 | 食べ物、動物、数字、身体、家族、色、場所、自然、時間、曜日、季節 | 300 |
| Lv.6〜10 | 基本 | 人・職業、建物、地理、交通、学習、感情、動詞（変化）、形容詞（性格・評価） | 300 |
| Lv.11〜15 | 標準 | 社会、環境、科学、概念、場面、動詞（思考・達成・存在）、副詞 | 300 |
| Lv.16〜20 | 発展 | 抽象概念、社会問題、国際、経済、健康、変化、動詞（創造・社会） | 300 |

### 2.2 単語リスト

実際の単語リストは別ファイル [05_english_words.md](./05_english_words.md) で定義する。

---

## 3. 問題生成ルール（4択）

### 3.1 正解の決定

- ユーザーの学習進捗（復習・未出・苦手）に基づいて出題対象の単語（正解）が決定される（01仕様書参照）。

### 3.2 誤答（Da, Db, Dc）の生成ロジック

**方針：可能な限り「同じレベル」から選ぶが、ヒントにならないようにする。**

1.  **候補プール作成**:
    - 原則：**同じレベル**に所属する他の単語。
    - 予備：不足する場合は `Level ± 1` の単語も含める。
2.  **除外条件（フィルタリング）**:
    - **正解と同じ日本語訳**を持つ単語は除外（別解防止）。
      - 英単語が違っても日本語が「すむ（live/reside）」などで重複する場合はNG。
    - **品詞が明らかに違う**ものは除外しない（今のところ厳密な品詞データを持たないので許容）。
    - 直近10問で「正解または誤答」として出現した単語は避ける（クールダウン）。
3.  **選択**:
    - フィルタ後のプールからランダムに3つ選択する。

### 3.3 選択肢の配置

- 正解の位置（ボタン1〜4）は毎回ランダムに決定する。

---

## 4. 日本語訳ルール

### 4.1 訳の採用基準

- **中学生にとって最も一般的**な訳を1つだけ採用する。
- 複数意味がある場合も、そのレベル帯で頻出するものを優先。
- ひらがな・カタカナを多用し、漢字は常用漢字の範囲で見やすく。

### 4.2 品詞の扱い

- 動詞：言い切り（〜する）
- 形容詞：言い切り（〜い、〜な）または名詞修飾形
- 名詞：単数・複数による訳し分けはしない（「本」で統一）

---

## 5. 入力UI仕様

### 5.1 画面レイアウト（4択）

英単語学習に特化したシンプルで大きなボタン配置。

```
┌─────────────────────────┐
│        Lv.3             │ ← ヘッダ（微小）
│                         │
│                         │
│        apple            │ ← 問題（英単語）
│                         │
│                         │
├─────────────────────────┤
│ ┌──────────┐┌──────────┐│
│ │  りんご  ││  みかん  ││
│ └──────────┘└──────────┘│
│ ┌──────────┐┌──────────┐│
│ │   犬     ││   猫     ││
│ └──────────┘└──────────┘│
└─────────────────────────┘
```

### 5.2 表示要素

| 要素 | 説明 |
|---|---|
| 問題テキスト | 英単語を画面中央に見やすく表示。フォントサイズ最大化。 |
| 選択肢ボタン | 2列×2行 のグリッド配置。押し間違いを防ぐため大きく配置。 |
| 正誤表示 | 回答直後に画面全体で `〇` `×` をオーバーレイ表示（0.5秒程度）。 |

### 5.3 スタイル要件

- **ボタンの高さ**: 指でタップしやすいよう、画面下半分を均等に4分割する程度の高さを確保する。
- **文字サイズ**: 視認性を最優先し、可能な限り大きく表示する。

---

## 6. データ構造

### 6.1 単語定義

```typescript
interface EnglishWord {
  id: string;        // "apple" (英単語そのものをIDとする)
  level: number;     // 1
  japanese: string;  // "りんご"
  category: string;  // "食べ物" (メタ情報)
  pos?: string;      // "noun" (品詞: Optional)
}
```

### 6.2 問題データ（クライアントへのレスポンス）

```typescript
interface VocabProblem {
  wordId: string;    // "apple"
  question: string;  // "apple"
  choices: {
    id: string;      // "apple" (正解), "dog" (誤答)
    text: string;    // "りんご", "いぬ"
  }[];
  answerId: string;  // "apple"
}
```

---

作成日: 2026年1月15日
最終更新: 2026年1月31日
