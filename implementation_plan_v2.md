# 修正計画：レベル管理・オンボーディング・設定機能の強化

## 1. 目的
ユーザーからのフィードバックに基づき、以下の3点を重点的に強化する。
1.  **オンボーディングの改善**: 学年選択の導入と、より正確な実力判定を行う。
2.  **レベル管理機能の追加**: ユーザーが自分で学習内容を調整できる権限を与える（設定画面）。
3.  **学習サイクルの最適化**: 1回のセッションを長くし（実装済: 10問）、中断感のない学習体験を提供する。

## 2. 変更・実装機能一覧

### A. オンボーディング改修（大）
- **学年選択フロー追加 (`Welcome.tsx` 改修)**
  - 現在の名前入力に加え、「がくねん」を選択させる（年少/年中/年長/小1/小2...）。
  - 選択された学年に応じて、初期推奨レベルを提示する。
- **実力テストの範囲拡大 (`check-level` ロジック)**
  - 現在はおそらく固定問題だが、推奨レベル周辺のスキルを網羅的に出題するように変更。
  - レベル20までの全範囲とまではいかないが、基本演算（足し算・引き算・掛け算）の境界を見極めるロジックを入れる。

### B. 設定・カリキュラム管理画面（新機能）
- **「学習設定」ページの作成 (`SettingsData.tsx` 等)**
  - 現在のスキルレベルを表示し、手動で変更できるようにする。
  - 「算数レベル (1-20)」のスライダーまたは選択UI。
  - 「英語レベル」の選択UI。
- **管理者（保護者）向け機能の明確化**
  - 子どもが誤って変更しないよう、簡単なロック（掛け算の答えを入力など）を入れても良いが、まずはUIを作成。

### C. 学習サイクルの改善（小〜中）
- **セッション継続オプション**
  - 「10問終わりました、つづけますか？」の画面で、「自動でつづける」チェックボックスを追加。
  - これがONなら、結果画面をスキップ（または短縮表示）して次のセットへ即座に移行する。

## 3. 実装ステップ

1.  **フェーズ1: 学習設定画面の実装** (優先度高)
    - ユーザーが手動でレベル調整できるようにするのが最も確実な解決策。
    - `Settings.tsx` から遷移できる `CurriculumSettings.tsx` を作成。
2.  **フェーズ2: オンボーディングの刷新**
    - 新規ユーザー向けの学年選択UI実装。
    - プロファイルへの `grade` フィールド追加。
3.  **フェーズ3: セッション継続ロジックの高度化**
    - 「もっとつづける」のUX改善。

## 4. ユーザー承認事項
まずは「フェーズ1: 学習設定画面」から着手します。
これにより、「今のレベルがわかるようにしたい」「レベル開放を設定からしたい」という要望を満たせます。
