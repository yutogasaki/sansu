---
name: Diff Reviewer (sansu)
description: git diff を前提に、危険な変更・回帰リスク・過剰変更を検出し、最小修正案とレビュー観点を提示する。
---

# Diff Reviewer (sansu) - Workspace Skill

このスキルは「レビューして」「差分見て」「このPRどう？」「変な変更ない？」など、差分確認が必要なときに適用する。

## 1) ゴール
- 意図しない回帰・破壊的変更を早期に検出
- 変更が過剰なら削減案を出す
- 仕様との不整合・用語ぶれ・UX悪化を検出

## 2) 事前確認（コンテキスト）
レビュー開始前に以下を確認する：
- `git status`
- `git diff --stat`
- 主要変更ファイル一覧
- 仕様書/要件に照らした「変更意図」

※ 変更意図が不明な場合は断定せず「推定」として扱い、確認ポイントを列挙する。

## 3) レビュー観点（優先順）
### A. 破壊的変更
- API/型/データ形式の互換性破壊
- 既存画面導線の崩壊
- データ消失・移行漏れ

### B. 仕様との整合
- 仕様にない機能追加が混ざっていないか
- 用語（due/weak等）が勝手に変わっていないか
- 数値条件（回数制限など）が守られているか

### C. 品質
- 例外/境界条件
- null/undefined
- 非同期・状態管理の競合
- パフォーマンス（過剰再レンダリングなど）

### D. UX/コピー
- 子ども向けにやさしい表現か
- エラー/不正解で萎えないか
- 迷った時の逃げ道があるか

### E. 過剰変更（AIあるある）
- リネーム祭り
- 不要な抽象化
- 未使用コード追加
- 意味の薄い整形だけの変更

## 4) 出力フォーマット（固定）
## Diff Review Report
### Summary
- 安全性：OK / 注意 / 危険
- 過剰変更：なし / あり（要削減）
- 仕様整合：OK / 要確認 / NG

### Findings（重要順）
1. （問題/指摘）
   - 根拠：
   - 影響：
   - 推奨修正：

### Suggested Minimal Patch
- 最小で直す方針（箇条書き）
- 余計な変更を戻す提案（ある場合）

### Verification Plan
- ここを直したら何を回すか（ve
