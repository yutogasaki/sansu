---
name: Commit & PR Helper (sansu)
description: 変更差分から、コミットメッセージ（prefix英語＋本文日本語＋#Issue）とPR本文（要約/背景/検証/影響/スクショ）を生成する。余計な変更混入も検出する。
---

# Commit & PR Helper (sansu) - Workspace Skill

このスキルは「コミットしたい」「PR出したい」「メッセージ作って」など、Git関連の文章生成が必要なときに適用する。

## 1) ゴール
- 迷わずコミットできる文章を作る
- PRレビューがしやすい説明にする
- 余計な変更・入れ忘れを検出する

## 2) 前提（このプロジェクトのGitルール）
- コミットメッセージは **prefix（英語） + 本文（日本語） + Issue番号（#123）**
- prefix 候補：
  - feat:, fix:, docs:, style:, refactor:, perf:, test:, chore:
- Issue番号が不明な場合：
  - 仮で `#TBD` を付け、PR作成前に置換するよう明記する

## 3) 事前に確認すること（最小）
以下の順で状況を把握する：
1. `git status`
2. `git diff --stat`
3. 可能なら `git diff` の主要変更点

※ 変更意図が曖昧なら、断定せず「推定」としてPR本文に書く。

## 4) 出力（固定フォーマット）
必ずこの順で出す：

## Commit Plan
- ステージング対象（入れる/除外）
- コミット分割案（必要なら）

## Commit Message候補（3案）
1) `prefix: 〜〜 #123`
   - 1行説明（日本語）
2) ...
3) ...

## PR Title候補（2案）
- ...

## PR Body（コピペ用）
（テンプレを必ず埋める）

## Checklist（出す前）
- [ ] 余計なファイル変更がない
- [ ] 検証済み（コマンド/手順）
- [ ] 仕様書/README更新の要否確認
- [ ] Issue番号が入っている

## 5) PR本文テンプレ（必須項目）
PR本文は以下の見出しを必ず含める：

### 目的 / 背景
- なぜこの変更が必要か

### 変更内容
- 何を変えたか（箇条書き）
- 画面/仕様への影響（あれば）

### 影響範囲
- 影響する機能・画面・データ

### 検証
- 実行したコマンド：
- 手動確認観点：

### スクリーンショット / 動画（任意）
- Before/After

### 補足 / 要確認
- 未決事項や注意点

## 6) 分割ルール（大きい差分のとき）
- 200行超 or 複数目的なら分割提案を優先
- 1PR=1目的が原則
- docs更新は別コミットでもOK

## 7) 混入検知（AIあるある対策）
以下があれば指摘し「戻す案」を提示する：
- 意味の薄い整形だけの変更
- リネーム祭り
- 未使用ファイル追加
- 依存追加（理由不明）

## 8) 禁止
- Issue番号なしで確定案にしない（#TBDは可）
- 検証を書かずにPR本文を完成扱いしない
- 変更意図を勝手に捏造しない
